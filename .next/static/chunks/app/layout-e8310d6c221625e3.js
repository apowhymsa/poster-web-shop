(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{495:function(e,t,r){Promise.resolve().then(r.bind(r,171)),Promise.resolve().then(r.bind(r,4809)),Promise.resolve().then(r.bind(r,4167)),Promise.resolve().then(r.t.bind(r,6685,23)),Promise.resolve().then(r.t.bind(r,3222,23)),Promise.resolve().then(r.bind(r,4370)),Promise.resolve().then(r.bind(r,4907)),Promise.resolve().then(r.bind(r,9291)),Promise.resolve().then(r.bind(r,9368)),Promise.resolve().then(r.bind(r,233)),Promise.resolve().then(r.t.bind(r,2120,23)),Promise.resolve().then(r.t.bind(r,4726,23)),Promise.resolve().then(r.t.bind(r,4421,23)),Promise.resolve().then(r.t.bind(r,2471,23)),Promise.resolve().then(r.t.bind(r,1894,23)),Promise.resolve().then(r.t.bind(r,4234,23))},4438:function(e,t,r){"use strict";var s=r(7437),a=r(6691),l=r.n(a),o=r(5106),n=r(5255),i=r(7227),c=r(2265),d=r(2418),u=r(8464),m=r(4913);t.Z=e=>{let{quantityItem:t,cartItem:r,inCheckout:a=!1}=e,[p,h]=(0,c.useState)(t),x=(0,m.Z)(p,500),f=(0,u.T)();return(0,c.useEffect)(()=>{h(t)},[t]),(0,c.useEffect)(()=>{console.log("debounce update"),f((0,d.$R)({product:r.product,quantity:p}))},[x]),(0,s.jsxs)("div",{className:"relative cart-item flex gap-x-2 after:absolute after:-bottom-[10px] after:w-full after:h-[0.5px] after:bg-[#e5e7eb]",children:[(0,s.jsx)("span",{className:"absolute top-0 right-0 w-5 h-5 cursor-pointer",title:"Удалить товар",onClick:()=>{f((0,d.wz)(r))},children:(0,s.jsx)(i.Z,{className:"h-5 w-5 text-black transition-colors hover:text-rose-400 "})}),(0,s.jsx)(l(),{src:r.product.photo?"https://poster-shop.joinposter.com".concat(r.product.photo):"/flower_image.jpg",alt:"Product Image",width:0,height:0,sizes:"100vw",style:{width:"100px",height:"auto",objectFit:"cover",borderRadius:"8px",objectPosition:"center center",aspectRatio:"1 / 1"},priority:!0}),(0,s.jsxs)("div",{className:"flex flex-col flex-1 justify-between py-5",children:[(0,s.jsxs)("div",{className:"item-description flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-[15px] overflow-ellipsis max-w-[175px] overflow-hidden whitespace-nowrap",title:r.product.product_name,children:r.product.product_name}),!a&&(0,s.jsxs)("span",{className:"text-[15px] font-medium",children:["₴ ",r.product.price["1"].slice(0,-2)]})]}),a?(0,s.jsx)("div",{children:(0,s.jsxs)("span",{children:["Цена: ","".concat(r.quantity," ед. x ").concat(r.product.price["1"].slice(0,-2)," грн = ").concat(r.quantity*Number(r.product.price["1"].slice(0,-2)))," грн"]})}):(0,s.jsxs)("div",{className:"item-quantity-edit flex gap-x-4",children:[(0,s.jsx)("button",{className:"flex items-center justify-center bg-rose-400 transition-colors hover:bg-rose-500 w-7 h-7 rounded",onClick:()=>{p>1&&h(e=>e-1)},children:(0,s.jsx)(o.Z,{className:"h-6 w-6 text-white"})}),(0,s.jsx)("input",{value:p,onChange:e=>h(Number(e.target.value)),min:1,max:100,type:"number",className:"block flex-1 rounded-md border-gray-300 shadow-sm focus:border-rose-400 disabled:cursor-not-allowed disabled:bg-gray-50 disabled:text-gray-500 h-7 text-sm"}),(0,s.jsx)("button",{className:"flex items-center justify-center bg-rose-400 transition-colors hover:bg-rose-500 w-7 h-7 rounded",onClick:()=>{p<100&&h(e=>e+1)},children:(0,s.jsx)(n.Z,{className:"h-6 w-6 text-white"})})]})]})]},r.product.product_id)}},4167:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return S}});var s=r(7437);r(660);var a=r(1396),l=r.n(a),o=r(2265);let n=o.forwardRef(function({title:e,titleId:t,...r},s){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:s,"aria-labelledby":t},r),e?o.createElement("title",{id:t},e):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}),i=o.forwardRef(function({title:e,titleId:t,...r},s){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:s,"aria-labelledby":t},r),e?o.createElement("title",{id:t},e):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"}))}),c=o.forwardRef(function({title:e,titleId:t,...r},s){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:s,"aria-labelledby":t},r),e?o.createElement("title",{id:t},e):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"}))});var d=r(1809),u=r(6691),m=r.n(u),p=r(3680);r(2286);var h=()=>{let e=(0,o.useContext)(p.k),t=(0,o.useMemo)(()=>["".concat(e[0]?"link-active":null),"".concat(e[1]?"link-active":null),"".concat(e[2]?"link-active":null)],[e]);return(0,s.jsx)("nav",{className:"header-nav",children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{className:t[0],children:(0,s.jsx)(l(),{href:"/",children:"Главная"})}),(0,s.jsx)("li",{className:t[1],children:(0,s.jsx)(l(),{href:"/products?sort=1",children:"Каталог товаров"})}),(0,s.jsx)("li",{className:t[2],children:(0,s.jsx)(l(),{href:"/about-us",children:"О нас"})})]})})};r(3642);var x=r(3633);let f=(0,o.forwardRef)((e,t)=>{let{setVisible:r,isVisible:a}=e,n=(0,o.useContext)(p.k),i=(0,o.useMemo)(()=>["".concat(n[0]?"link-active":null),"".concat(n[1]?"link-active":null),"".concat(n[2]?"link-active":null)],[n]),c=()=>{r(!1)};return(0,s.jsxs)("div",{ref:t,className:"burger-content",children:[(0,s.jsx)("nav",{className:"burger-content-nav",children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{className:i[0],onClick:c,children:(0,s.jsx)(l(),{href:"/",children:"Главная"})}),(0,s.jsx)("li",{className:i[1],onClick:c,children:(0,s.jsx)(l(),{href:"/products",children:"Каталог товаров"})}),(0,s.jsx)("li",{className:i[2],onClick:c,children:(0,s.jsx)(l(),{href:"/about-us",children:"О нас"})})]})}),(0,s.jsx)("span",{className:"burger-content-close",onClick:()=>r(!1),children:(0,s.jsx)(x.Z,{className:"h-6 w-6 text-gray-400"})})]})});r(5761);var b=r(8464),g=r(4438),v=r(2418),j=r(9978),y=r(2122),w=r(2464),N=r(4033),k=e=>{let{setOpen:t,isOpen:r}=e,a=(0,b.C)(e=>e.cartReducer).cart,l=(0,b.T)(),n=(0,N.useRouter)();(0,o.useEffect)(()=>{let e=localStorage.getItem("authUserId");(0,w.Aj)(y.I,async t=>{t?e&&(console.log("auth",e),i(e)):l((0,v.RV)([]))})},[]);let i=async e=>{var t;let r=(0,j.JU)(y.db,"users",e.toString()),s=await (0,j.QT)(r);l((0,v.RV)((null===(t=s.data())||void 0===t?void 0:t.cart)||[]))};return(0,s.jsxs)("div",{className:r?"product-cart cart_active drop-shadow-2xl":"product-cart",children:[(0,s.jsx)("h3",{className:"font-medium text-[16px] text-center",children:"Корзина"}),a.length<=0?(0,s.jsxs)("div",{className:"flex flex-col justify-between gap-y-10 items-center",children:[(0,s.jsx)(m(),{src:"/cart_icon.svg",alt:"Product Image",width:0,height:0,sizes:"20vw",style:{width:"40%",height:"auto",objectFit:"cover",borderRadius:"8px",objectPosition:"center center",aspectRatio:"1 / 1"},placeholder:"blur",blurDataURL:"/cart_icon.svg",priority:!0}),(0,s.jsx)("h2",{className:"font-bold",children:"Товаров нет"}),(0,s.jsxs)("p",{className:"text-neutral-400 text-center",children:[" ","Для оформления заказа добавьте товар в корзину"]})]}):(0,s.jsxs)("div",{className:"cart-container flex flex-col gap-y-5 flex-1",children:[(0,s.jsx)("p",{className:"text-[15px] text-right mt-5 transition-colors hover:text-rose-400 cursor-pointer",onClick:()=>l((0,v.LL)()),children:"Очистить корзину"}),a.map(e=>(0,s.jsx)(g.Z,{cartItem:e,quantityItem:e.quantity},e.product.product_id))]}),a.length>0?(0,s.jsxs)("div",{className:"mt-5 flex flex-col gap-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-[15px]",children:"Полная цена"}),(0,s.jsxs)("span",{className:"text-[15px] font-medium",children:["₴"," ",a.reduce((e,t)=>e+Number(t.product.price["1"].slice(0,-2))*t.quantity,0)]})]}),(0,s.jsx)("button",{className:" w-full h-10 transition-colors bg-rose-400 hover:bg-rose-500 rounded text-white",onClick:()=>n.push("/checkout"),children:"Продолжить"})]}):null]})},C=r(3293),_=r(4913);let P=e=>{let{product:t}=e;return(0,s.jsxs)(l(),{className:"flex gap-x-4 h-auto w-full py-4 border-b items-center active:bg-gray-200 transition-colors hover:bg-gray-100",href:"/products/".concat(t.product_id),children:[(0,s.jsx)("div",{className:"h-20 w-20",children:(0,s.jsx)(m(),{src:t.photo_origin?"https://poster-shop.joinposter.com".concat(t.photo):"/flower_image.jpg",alt:"Product Image",width:0,height:0,sizes:"100vw",style:{width:"100%",height:"auto",objectFit:"cover",borderRadius:"8px",objectPosition:"center center",aspectRatio:"1 / 1"},placeholder:"blur",blurDataURL:"/flower_image.jpg",priority:!0})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-lg",children:t.product_name}),(0,s.jsxs)("p",{className:"font-semibold text-[16px]",children:["₴ ",t.price["1"].slice(0,-2)]})]})]})},I=e=>{let{onClose:t,isOpen:r}=e,[a,l]=(0,o.useState)(""),n=(0,_.Z)(a,300),c=(0,b.C)(e=>e.productsReducer.products),[d,u]=(0,o.useState)([]);return((0,o.useEffect)(()=>{r?document.body.style.overflow="hidden":document.body.style.overflow="visible"},[r]),(0,o.useEffect)(()=>{if(n.trim().length<=0)u([]),console.log("here");else{let e=c.filter(e=>e.product_name.toLowerCase().trim().includes(n.toLowerCase().trim()));u(e)}},[n]),r)?(0,s.jsx)("div",{className:"absolute w-screen h-screen bg-black bg-opacity-50 top-0 left-0 z-50 backdrop-blur-sm",onClick:()=>{l(""),t()},children:(0,s.jsxs)("div",{onClick:e=>e.stopPropagation(),className:"bg-white py-6 px-20",children:[(0,s.jsxs)("div",{className:"relative flex items-center gap-x-6",children:[(0,s.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center px-2.5",children:(0,s.jsx)(i,{className:"h-5 w-5 text-gray-500"})}),(0,s.jsx)("input",{type:"text",id:"search",className:"block w-full rounded-md border-gray-300 pl-10 shadow-sm focus:border-primary-400 focus:ring focus:ring-primary-200 focus:ring-opacity-50 disabled:cursor-not-allowed disabled:bg-gray-50 disabled:text-gray-500",placeholder:"Поиск товара...",value:a,onChange:e=>l(e.target.value)}),(0,s.jsx)("span",{onClick:()=>{l(""),t()},className:"transition-colors hover:text-rose-400 cursor-pointer",children:"Отмена"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-lg font-medium leading-10",children:["Результаты поиска ",d.length>0&&"(".concat(d.length,")")]}),(0,s.jsx)("div",{className:"flex flex-col max-h-[300px] overflow-y-auto",children:0===d.length?(0,s.jsx)("span",{children:"Товаров не найдено"}):d.map(e=>(0,s.jsx)(P,{product:e},e.product_id))})]})]})}):null};var S=()=>{let[e,t]=(0,o.useState)(!1),[r,a]=(0,o.useState)(!1),u=(0,o.useRef)(null),[p,x]=(0,o.useState)(!1),g=(0,b.C)(e=>e.cartReducer).cart;return(0,o.useEffect)(()=>{var e,t;r?(document.body.style.overflow="hidden",null===(t=u.current)||void 0===t||t.classList.add("burger-content-visible")):(document.body.style.overflow="visible",null===(e=u.current)||void 0===e||e.classList.remove("burger-content-visible"))},[r]),(0,o.useEffect)(()=>{e?document.body.style.overflow="hidden":document.body.style.overflow="visible"},[e]),(0,s.jsxs)("div",{className:"header-main",children:[(0,s.jsxs)("div",{className:"header-main-mobile-left",children:[(0,s.jsx)(n,{className:"h-6 w-6 text-gray-400",onClick:()=>{a(e=>!e)}}),(0,s.jsx)(f,{ref:u,setVisible:a,isVisible:r}),(0,s.jsx)(i,{className:"h-6 w-6 text-gray-400",onClick:()=>t(!0)}),(0,s.jsx)(I,{onClose:()=>t(!1),isOpen:e})]}),(0,s.jsx)(l(),{href:"/",role:"link",className:"header-main-logo",children:(0,s.jsx)(m(),{src:"/clumba-logo.svg",alt:"Logo",width:90,height:40,priority:!0,placeholder:"blur",blurDataURL:"/clumba-logo.svg"})}),(0,s.jsx)(h,{}),(0,s.jsxs)("div",{className:"header-buttons",children:[(0,s.jsx)(i,{className:"h-6 w-6 text-gray-400",onClick:()=>t(!0)}),(0,s.jsx)(I,{onClose:()=>t(!1),isOpen:e}),(0,s.jsx)(d.Z,{className:"h-6 w-6 text-gray-400",onClick:async()=>{await (0,C.Nr)((0,w.v0)(),"apowhymsa@gmail.com").then(e=>{console.log(e)})}}),(0,s.jsx)("span",{className:"header-main-divider"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(c,{className:["transition-colors cart-icon h-6 w-6 text-gray-400",p&&"text-rose-400"].join(" "),onClick:()=>x(e=>!e)}),g.length>0?(0,s.jsx)("span",{className:"pointer-events-none absolute flex items-center justify-center text-xs -top-2 -right-2 w-5 h-5 bg-rose-400 text-white rounded-full",children:(0,s.jsx)("span",{className:"h-[13px]",children:g.length})}):null]}),(0,s.jsx)(k,{isOpen:p,setOpen:x})]})]})}},4809:function(e,t,r){"use strict";r.r(t);var s=r(7437);r(3527);var a=r(3293),l=r(2122),o=r(2265),n=r(8138),i=r(724),c=r(9780),d=r(3030);t.default=()=>{let{info:e}=(0,d.Z)(),{isLoading:t,isLogged:r}=(0,o.useContext)(n.V),{isOpen:u,setOpen:m}=(0,o.useContext)(c.t);console.log(t);let p=async()=>{await (0,a.w7)(l.I).then(()=>localStorage.removeItem("authUserId")),e("Успешный выход с аккаунта")};return(0,s.jsxs)("div",{className:"header-top",children:[(0,s.jsx)("span",{className:"header-top-lang text flex-1",children:"UA"}),(0,s.jsx)("p",{className:"text flex-none",children:'Цветочный магазин "Clumba"'}),(0,s.jsx)("div",{className:"header-top-buttons flex flex-1 justify-end gap-x-3 items-center",children:t?(0,s.jsx)(i.Z,{inline:!0,className:"w-12"}):r?(0,s.jsx)("span",{className:"text",role:"button",onClick:p,children:"Выйти"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text",role:"button",onClick:()=>m(!0),children:"Создать аккаунт"}),(0,s.jsx)("span",{className:"header-top-divider"}),(0,s.jsx)("span",{className:"text",role:"button",onClick:()=>m(!0),children:"Войти"})]})})]})}},4370:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var s=r(7437),a=r(2265),l=r(9780);let o=a.forwardRef(function({title:e,titleId:t,...r},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:s,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75"}))}),n=a.forwardRef(function({title:e,titleId:t,...r},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:s,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z"}))});var i=r(3633),c=e=>{let{labelText:t,leftIcon:r,register:a,options:l,error:o,...n}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:n.id,className:"mb-1 block text-sm font-bold text-gray-700 ".concat(o?'after:ml-0.5 after:text-red-500 after:content-["*"]':null),children:t}),(0,s.jsxs)("div",{className:"relative",children:[r?(0,s.jsx)("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center px-2.5",children:r}):null,(0,s.jsx)("input",{className:"block w-full rounded-md shadow-sm ".concat(r?"pl-10":"pl-4"," ").concat(o?"border-red-300 focus:border-red-300 focus:ring focus:ring-red-200":"border-gray-300 focus:border-primary-400 focus:ring focus:ring-primary-200","  focus:ring-opacity-50 disabled:cursor-not-allowed disabled:bg-gray-50 disabled:text-gray-500"),...n,...a(n.name,l)})]}),o?(0,s.jsx)("p",{className:"mt-1 text-sm text-red-500",children:o.message}):null]})},d=r(1865),u=r(2122),m=r(3030),p=r(9978),h=e=>{let[t,r]=(0,a.useState)(!1),{info:l,error:h}=(0,m.Z)(),{onClose:x,setStep:f,setUserFields:b,userFields:g}=e,{register:v,handleSubmit:j,formState:{errors:y}}=(0,d.cI)(),w=async(e,t)=>{null==t||t.preventDefault(),r(!0);let s=(0,p.IO)((0,p.hJ)(u.db,"users"),(0,p.ar)("email","==",null==g?void 0:g.email)),a=await (0,p.PL)(s);a.empty?f(2):h("Учётная запись с указаным электронным адресом существует!"),r(!1)};return(0,s.jsxs)("div",{className:"absolute top-1/2 left-1/2 bg-white h-fit w-[500px] -translate-x-1/2 -translate-y-1/2 px-9 py-9 rounded",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("div",{className:"btn-close-modal flex absolute right-5 top-5 cursor-pointer transition-transform hover:rotate-180 items-center justify-center",onClick:x,children:(0,s.jsx)(i.Z,{className:"h-6 w-6 text-black"})}),(0,s.jsx)("h3",{className:"text-center font-semibold text-xl",children:"Создание аккаунта - Шаг 1"}),(0,s.jsx)("div",{className:"modal-container flex flex-col gap-y-5 my-4",children:(0,s.jsxs)("form",{className:"default-section flex flex-col gap-y-5 my-3",onSubmit:j(w),children:[(0,s.jsx)(c,{labelText:"Электронная почта",leftIcon:(0,s.jsx)(o,{className:"h-5 w-5 text-gray-500"}),placeholder:"Пример: your@email.com",id:"email",name:"email",type:"email",defaultValue:(null==g?void 0:g.email)||"",onChangeCapture:e=>{b({...g,email:e.target.value})},register:v,options:{required:{value:!0,message:"Поле обязательное для заполнения"},minLength:{value:6,message:"Пароль должен иметь больше чем 5 символов"}},error:y.email}),(0,s.jsx)(c,{labelText:"Пароль",leftIcon:(0,s.jsx)(n,{className:"h-5 w-5 text-gray-500"}),placeholder:"Пароль",id:"password",name:"password",type:"password",defaultValue:(null==g?void 0:g.password)||"",onChangeCapture:e=>{b({...g,password:e.target.value})},register:v,options:{required:{value:!0,message:"Поле обязательное для заполнения"},minLength:{value:6,message:"Пароль должен иметь больше чем 5 символов"}},error:y.password}),(0,s.jsx)("button",{type:"submit",disabled:t,className:"w-full h-10 px-4 transition-colors text-white bg-rose-400 hover:bg-rose-500 disabled:cursor-not-allowed disabled:border-rose-400 disabled:bg-primary-400",children:t?"Загрузка...":"Продолжить"})]})}),(0,s.jsxs)("span",{className:"flex justify-end items-center gap-x-1",children:[(0,s.jsx)("span",{children:"Есть аккаунт?"}),(0,s.jsx)("span",{className:"underline text-blue-400 cursor-pointer",onClick:()=>f(3),children:"Войти"})]})]})};let x=a.forwardRef(function({title:e,titleId:t,...r},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:s,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z"}))});var f=r(1809),b=r(3293),g=r(9222),v=e=>{let{info:t,error:r}=(0,m.Z)(),[l,o]=(0,a.useState)(!1),{onClose:h,setStep:v,userFields:j,setUserFields:y}=e,{register:w,handleSubmit:N,formState:{errors:k}}=(0,d.cI)(),C=async(e,s)=>{o(!0);let a=(0,p.IO)((0,p.hJ)(u.db,"users"),(0,p.ar)("phone","==",null==j?void 0:j.phone)),l=await (0,p.PL)(a);if(l.empty){let e={client_name:null==j?void 0:j.name,client_groups_id_client:1,phone:null==j?void 0:j.phone};(0,b.Xb)(u.I,null==j?void 0:j.email,null==j?void 0:j.password).then(()=>{g.Z.post("/api/user",{body:JSON.stringify(e)}).then(async()=>{await (0,p.ET)((0,p.hJ)(u.db,"users"),{...j}).then(e=>{localStorage.setItem("authUserId",e.id)}),t("Учётная запись успешно создана, вход выполнен автоматически!")}).catch(e=>{let t=u.I.currentUser;null==t||t.delete(),r("Ошибка записи в POSTER. ErrorMessage: ".concat(e.message,". ErrorCode: ").concat(e.code))}).finally(()=>{h(),o(!1)})})}else r("Учётная запись с указаным номером телефона существует!");o(!1)};return(0,s.jsxs)("div",{className:"absolute top-1/2 left-1/2 bg-white h-fit w-[500px] -translate-x-1/2 -translate-y-1/2 px-9 py-9 rounded",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("div",{className:"btn-close-modal flex absolute right-5 top-5 cursor-pointer transition-transform hover:rotate-180 items-center justify-center",onClick:h,children:(0,s.jsx)(i.Z,{className:"h-6 w-6 text-black"})}),(0,s.jsx)("h3",{className:"text-center font-semibold text-xl",children:"Создание аккаунта - Шаг 2"}),(0,s.jsxs)("form",{className:"modal-container flex flex-col gap-y-5 my-4",onSubmit:N(C),children:[(0,s.jsx)(c,{labelText:"Имя и фамилия",leftIcon:(0,s.jsx)(f.Z,{className:"h-5 w-5 text-gray-500"}),placeholder:"Пример: Влад Попов",id:"name",name:"name",type:"text",defaultValue:(null==j?void 0:j.name)||"",onChangeCapture:e=>{y({...j,name:e.target.value})},register:w,options:{required:{value:!0,message:"Поле обязательное для заполнения"},minLength:{value:6,message:"Поле должно содержать не менее 6-ти символов"}},error:k.name}),(0,s.jsx)(c,{labelText:"Номер телефона",leftIcon:(0,s.jsx)(x,{className:"h-5 w-5 text-gray-500"}),placeholder:"Пример: +380...",id:"phone",name:"phone",type:"tel",defaultValue:(null==j?void 0:j.phone)||"",onChangeCapture:e=>{y({...j,phone:e.target.value})},register:w,options:{required:{value:!0,message:"Поле обязательное для заполнения"}},error:k.phone}),(0,s.jsx)(c,{labelText:"Пароль",leftIcon:(0,s.jsx)(n,{className:"h-5 w-5 text-gray-500"}),placeholder:"Пароль",id:"password",name:"password",type:"password",defaultValue:(null==j?void 0:j.password)||"",onChangeCapture:e=>{y({...j,password:e.target.value})},register:w,options:{required:{value:!0,message:"Поле обязательное для заполнения"},minLength:{value:6,message:"Пароль должен иметь больше чем 5 символов"}},error:k.password}),(0,s.jsx)("button",{type:"submit",disabled:l,className:"w-full h-10 px-4 transition-colors text-white bg-rose-400 hover:bg-rose-500 disabled:cursor-not-allowed disabled:border-rose-400 disabled:bg-primary-400",children:l?"Загрузка...":"Завершить регистрацию"})]})]})};r(6518);var j=e=>{let{error:t,info:r}=(0,m.Z)(),[l,h]=(0,a.useState)(!1),{onClose:x,onClick:f,userFields:g,setStep:v,setUserFields:j}=e,{register:y,handleSubmit:w,formState:{errors:N}}=(0,d.cI)(),k=async()=>{console.log(g),h(!0);let e=(0,p.IO)((0,p.hJ)(u.db,"users"),(0,p.ar)("email","==",null==g?void 0:g.email),(0,p.ar)("password","==",null==g?void 0:g.password)),s=await (0,p.PL)(e);localStorage.setItem("authUserId",s.docs[0].id),s.empty?t("Учётной записи с указаными данными не существует!"):(0,b.e5)(u.I,null==g?void 0:g.email,null==g?void 0:g.password).then(e=>{console.log(e.user.providerData),x(),r("Успешный вход в аккаунт!")}).catch(()=>t("Ошибка при входе в аккаунт")),h(!1)};return(0,s.jsxs)("div",{className:"absolute top-1/2 left-1/2 bg-white h-fit w-[500px] -translate-x-1/2 -translate-y-1/2 px-9 py-9 rounded",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("div",{className:"btn-close-modal flex absolute right-5 top-5 cursor-pointer transition-transform hover:rotate-180 items-center justify-center",onClick:x,children:(0,s.jsx)(i.Z,{className:"h-6 w-6 text-black"})}),(0,s.jsx)("h3",{className:"text-center font-semibold text-xl",children:"Вход в аккаунт"}),(0,s.jsx)("div",{className:"modal-container flex flex-col gap-y-5 my-4",children:(0,s.jsxs)("form",{className:"default-section flex flex-col gap-y-5 my-3",onSubmit:w(k),children:[(0,s.jsx)(c,{labelText:"Электронная почта",leftIcon:(0,s.jsx)(o,{className:"h-5 w-5 text-gray-500"}),placeholder:"Пример: your@email.com",id:"email",name:"email",type:"email",defaultValue:(null==g?void 0:g.email)||"",onChangeCapture:e=>{j({...g,email:e.target.value})},register:y,options:{required:{value:!0,message:"Поле обязательное для заполнения"},minLength:{value:6,message:"Пароль должен иметь больше чем 5 символов"}},error:N.email}),(0,s.jsx)(c,{labelText:"Пароль",leftIcon:(0,s.jsx)(n,{className:"h-5 w-5 text-gray-500"}),placeholder:"Пароль",id:"password",name:"password",type:"password",defaultValue:(null==g?void 0:g.password)||"",onChangeCapture:e=>{j({...g,password:e.target.value})},register:y,options:{required:{value:!0,message:"Поле обязательное для заполнения"},minLength:{value:6,message:"Пароль должен иметь больше чем 5 символов"}},error:N.password}),(0,s.jsx)("button",{type:"submit",disabled:l,className:"w-full h-10 px-4 transition-colors text-white bg-rose-400 hover:bg-rose-500 disabled:cursor-not-allowed disabled:border-rose-400 disabled:bg-primary-400",children:l?"Загрузка...":"Войти"})]})}),(0,s.jsxs)("span",{className:"flex justify-end items-center gap-x-1",children:[(0,s.jsx)("span",{children:"Нет аккаунта?"}),(0,s.jsx)("span",{className:"underline text-blue-400 cursor-pointer",onClick:()=>v(1),children:"Регистрация"})]})]})},y=()=>{let{setOpen:e,isOpen:t}=(0,a.useContext)(l.t),[r,o]=(0,a.useState)(1),[n,i]=(0,a.useState)({name:"",phone:"",password:"",email:"",profilePhoto:""});(0,a.useEffect)(()=>{t?document.body.style.overflow="hidden":document.body.style.overflow="visible"},[t]);let c=()=>{e(!1),o(1),i({name:"",password:"",email:"",phone:"",profilePhoto:""})};return t?(0,s.jsxs)("div",{className:"absolute w-screen h-screen bg-black bg-opacity-50 top-0 left-0 z-50 backdrop-blur-sm",onClick:c,children:[1===r&&(0,s.jsx)(h,{userFields:n,setUserFields:i,setStep:o,onClose:c}),2===r&&(0,s.jsx)(v,{setStep:o,onClose:c,userFields:n,setUserFields:i,setOpen:e}),3===r&&(0,s.jsx)(j,{setStep:o,onClose:c,userFields:n,setUserFields:i})]}):null}},8138:function(e,t,r){"use strict";r.d(t,{V:function(){return a}});var s=r(2265);let a=(0,s.createContext)({isLogged:!1,isLoading:!1})},9291:function(e,t,r){"use strict";r.r(t);var s=r(7437),a=r(8138),l=r(2265),o=r(2464),n=r(2122);t.default=e=>{let{children:t}=e,[r,i]=(0,l.useState)(!0),[c,d]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{(0,o.Aj)(n.I,async e=>{e?d(!0):d(!1),i(!1)})},[]),(0,s.jsx)(a.V.Provider,{value:{isLogged:c,isLoading:r},children:t})}},9780:function(e,t,r){"use strict";r.d(t,{t:function(){return a}});var s=r(2265);let a=(0,s.createContext)({isOpen:!1,setOpen:()=>{}})},9368:function(e,t,r){"use strict";r.r(t);var s=r(7437),a=r(2265),l=r(9780);t.default=e=>{let{children:t}=e,[r,o]=(0,a.useState)(!1);return(0,s.jsx)(l.t.Provider,{value:{isOpen:r,setOpen:o},children:t})}},3680:function(e,t,r){"use strict";r.d(t,{k:function(){return a}});var s=r(2265);let a=(0,s.createContext)([!1,!1,!1])},4907:function(e,t,r){"use strict";r.r(t);var s=r(7437),a=r(2265),l=r(3680),o=r(4033);t.default=e=>{let{children:t}=e,[r,n]=(0,a.useState)([!1,!1,!1]),i=(0,o.usePathname)();return(0,a.useEffect)(()=>{var e;switch(null===(e=document.querySelector(".product-cart"))||void 0===e||e.classList.remove("cart_active"),i){case"/":n([!0,!1,!1]);break;case"/products":n([!1,!0,!1]);break;case"/about-us":n([!1,!1,!0]);break;default:n([!1,!1,!1])}},[i]),(0,s.jsx)(l.k.Provider,{value:r,children:t})}},4913:function(e,t,r){"use strict";var s=r(2265);t.Z=(e,t)=>{let[r,a]=(0,s.useState)(e);return(0,s.useEffect)(()=>{let r=setTimeout(()=>a(e),t);return()=>clearTimeout(r)},[e,t]),r}},3030:function(e,t,r){"use strict";var s=r(171);t.Z=()=>({error:(e,t)=>{s.toast.error(e,{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored",...t})},info:(e,t)=>{s.toast.info(e,{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored",...t})}})},2122:function(e,t,r){"use strict";r.d(t,{I:function(){return n},db:function(){return i}});var s=r(994),a=r(2464),l=r(9978);let o=(0,s.ZF)({apiKey:"AIzaSyByk7n5JzbWrLCffBJXGiXWnc8MZbe0JqU",authDomain:"poster-ecommerce-shop.firebaseapp.com",projectId:"poster-ecommerce-shop",storageBucket:"poster-ecommerce-shop.appspot.com",messagingSenderId:"14361184003",appId:"1:14361184003:web:d17bfd870e4195075bcb36",measurementId:"G-N1HBV39R4Y"}),n=(0,a.v0)(o),i=(0,l.ad)(o)},2418:function(e,t,r){"use strict";r.d(t,{$R:function(){return i},LL:function(){return d},RV:function(){return u},ZW:function(){return n},wz:function(){return c}});var s=r(8340),a=r(9978),l=r(2122);let o=(0,s.oM)({name:"cart",initialState:{cart:[]},reducers:{setCart:(e,t)=>{e.cart=t.payload,console.log("payload",t.payload)},setCartItem:(e,t)=>{let r=localStorage.getItem("authUserId"),s=e.cart.findIndex(e=>e.product.product_id===t.payload.product.product_id);-1!==s?e.cart[s].quantity+=t.payload.quantity:e.cart.push(t.payload),(0,a.pl)((0,a.JU)(l.db,"users",r.toString()),{cart:[...e.cart]},{merge:!0})},updateQuantity:(e,t)=>{let r=localStorage.getItem("authUserId"),s=e.cart.findIndex(e=>e.product.product_id===t.payload.product.product_id);e.cart[s].quantity=t.payload.quantity,(0,a.pl)((0,a.JU)(l.db,"users",r.toString()),{cart:[...e.cart]},{merge:!0})},deleteItem:(e,t)=>{let r=localStorage.getItem("authUserId");e.cart=e.cart.filter(e=>e.product.product_id!==t.payload.product.product_id),(0,a.pl)((0,a.JU)(l.db,"users",r.toString()),{cart:[...e.cart]},{merge:!0})},clearCart:e=>{let t=localStorage.getItem("authUserId");e.cart=[],(0,a.pl)((0,a.JU)(l.db,"users",t.toString()),{cart:[]},{merge:!0})}}}),{setCartItem:n,updateQuantity:i,deleteItem:c,clearCart:d,setCart:u}=o.actions;t.ZP=o.reducer},3809:function(e,t,r){"use strict";r.d(t,{DG:function(){return l}});var s=r(8340);let a=(0,s.oM)({name:"categories",initialState:{categories:[]},reducers:{setCategories:(e,t)=>{e.categories=t.payload}}}),{setCategories:l}=a.actions;t.ZP=a.reducer},1908:function(e,t,r){"use strict";r.d(t,{L$:function(){return l}});var s=r(8340);let a=(0,s.oM)({name:"comments",initialState:{comments:[]},reducers:{setComments:(e,t)=>{e.comments=t.payload},addComment:(e,t)=>{e.comments.push(t.payload)}}}),{setComments:l,addComment:o}=a.actions;t.ZP=a.reducer},8464:function(e,t,r){"use strict";r.d(t,{C:function(){return l},T:function(){return a}});var s=r(3198);let a=()=>(0,s.I0)(),l=s.v9},7465:function(e,t,r){"use strict";r.d(t,{RU:function(){return l},ft:function(){return o}});var s=r(8340);let a=(0,s.oM)({name:"products",initialState:{products:[],filteredProducts:[]},reducers:{setProducts:(e,t)=>{e.products=t.payload,e.filteredProducts=t.payload},filterProducts:(e,t)=>{switch(e.filteredProducts=[...e.products],t.payload.sortFilter){case"1":e.filteredProducts=[...e.products];break;case"2":e.filteredProducts=e.filteredProducts.reverse();break;case"3":e.filteredProducts=e.filteredProducts.sort((e,t)=>Number(e.price["1"].slice(0,-2))<Number(t.price["1"].slice(0,-2))?-1:Number(e.price["1"].slice(0,-2))>Number(t.price["1"].slice(0,-2))?1:0);break;case"4":e.filteredProducts=e.filteredProducts.sort((e,t)=>Number(e.price["1"].slice(0,-2))>Number(t.price["1"].slice(0,-2))?-1:Number(e.price["1"].slice(0,-2))<Number(t.price["1"].slice(0,-2))?1:0)}e.filteredProducts=e.filteredProducts.filter(e=>{let r=Number(e.price["1"].slice(0,-2));return r>=t.payload.priceFilter[0]&&r<=t.payload.priceFilter[1]}),""===t.payload.categoriesFilter[0]?t.payload.categoriesFilter.slice(1).length>0&&(e.filteredProducts=e.filteredProducts.filter(e=>t.payload.categoriesFilter.includes(e.menu_category_id))):t.payload.categoriesFilter.length>0&&(e.filteredProducts=e.filteredProducts.filter(e=>t.payload.categoriesFilter.includes(e.menu_category_id)))}}}),{setProducts:l,filterProducts:o}=a.actions;t.ZP=a.reducer},233:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var s=r(7437),a=r(8340),l=r(7465),o=r(3809),n=r(2418),i=r(1908);let c=(0,a.xC)({reducer:{productsReducer:l.ZP,categoriesReducer:o.ZP,cartReducer:n.ZP,commentsReducer:i.ZP},devTools:!1});var d=r(3198),u=r(2265);function m(e){let{children:t}=e;return(0,u.useEffect)(()=>{},[]),(0,s.jsx)(d.zt,{store:c,children:t})}},6518:function(){},2471:function(){},5761:function(){},4234:function(){},1894:function(){},3642:function(){},660:function(){},2286:function(){},3527:function(){},4421:function(e){e.exports={style:{fontFamily:"'__Comfortaa_b3b938', '__Comfortaa_Fallback_b3b938'",fontStyle:"normal"},className:"__className_b3b938"}},4726:function(e){e.exports={style:{fontFamily:"'__Montserrat_dd16e6', '__Montserrat_Fallback_dd16e6'",fontStyle:"normal"},className:"__className_dd16e6"}},2120:function(e){e.exports={style:{fontFamily:"'__Rubik_54a17e', '__Rubik_Fallback_54a17e'",fontStyle:"normal"},className:"__className_54a17e"}},4033:function(e,t,r){e.exports=r(8165)},1809:function(e,t,r){"use strict";var s=r(2265);let a=s.forwardRef(function({title:e,titleId:t,...r},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"}))});t.Z=a},3633:function(e,t,r){"use strict";var s=r(2265);let a=s.forwardRef(function({title:e,titleId:t,...r},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))});t.Z=a},3293:function(e,t,r){"use strict";r.d(t,{Nr:function(){return s.Nr},Xb:function(){return s.Xb},e5:function(){return s.e5},w7:function(){return s.w7}});var s=r(2464)}},function(e){e.O(0,[358,214,454,24,522,452,130,971,596,744],function(){return e(e.s=495)}),_N_E=e.O()}]);